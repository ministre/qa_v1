{% extends "device/wrapper.html" %}

{% load i18n static %}

{% block content %}

<p><a href="{% url 'devices' %}">{% trans "Devices" %}</a> &raquo; {{ device.vendor }} {{ device }}</p>

<ul class="tabs" data-tabs id="device-tabs">
    <li class="tabs-title {% if tab_id == 1 %} is-active{% endif %}">
        <a data-tabs-target="general" href="#general">{% trans "General" %}</a>
    </li>
    <li class="tabs-title {% if tab_id == 2 %} is-active{% endif %}">
        <a data-tabs-target="redmine" href="#redmine">Redmine</a>
    </li>
</ul>

<div class="tabs-content" data-tabs-content="device-tabs">
    <div class="tabs-panel {% if tab_id == 1 %}is-active{% endif %}" id="general">
        <a href="{% url 'device_update' pk=device.id %}" class="button small">{% trans "Update" %}</a>
        <a href="{% url 'device_delete' pk=device.id %}" class="button alert small">{% trans "Delete" %}</a>

        <div class="grid-x grid-margin-x">
            <div class="cell">
                <div class="card">
                    <div class="card-section">
                        <table class="unstriped">
                            <tr>
                                <td>ID:</td>
                                <td>{{ device.id }}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Device Type" %}:</td>
                                <td>{{ device.type }}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Vendor" %}:</td>
                                <td>{{ device.vendor }}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Model" %}:</td>
                                <td>{{ device.model }}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Hardware Version" %}:</td>
                                <td>{% if device.hw %}{{ device.hw }}{% endif %}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Redmine Project" %}:</td>
                                <td>{% if device.redmine_project %}{{ device.redmine_project }}{% endif %}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Redmine Project Name" %}:</td>
                                <td>{% if device.redmine_project_name %}{{ device.redmine_project_name }}{% endif %}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Redmine Project Description" %}:</td>
                                <td>{% if device.redmine_project_desc %}{{ device.redmine_project_desc }}{% endif %}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Redmine Parent Project" %}:</td>
                                <td>{% if device.redmine_parent %}{{ device.redmine_parent }}{% endif %}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Created" %}:</td>
                                <td>{{ device.created_at }} {% if device.created_by %}({{ device.created_by }}){% endif %}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Last Update" %}:</td>
                                <td>{{ device.updated_at }} {% if device.updated_by %}({{ device.updated_by }}){% endif %}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Protocols amount" %}:</td>
                                <td>{{ protocols_count }}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid-x grid-margin-x">
            <div class="cell">
                <div class="card">
                    <div class="card-section">
                        <h5>{% trans "Additional Information" %}</h5>
                        <table class="unstriped">
                            <tr>
                                <td>{% trans "Interfaces" %}:</td>
                                <td>{{ device.interfaces }}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Leds" %}:</td>
                                <td>{{ device.leds }}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Buttons" %}:</td>
                                <td>{{ device.buttons }}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Chipsets" %}:</td>
                                <td>{{ device.chipsets }}</td>
                            </tr>
                            <tr>
                                <td>{% trans "Memory" %}:</td>
                                <td>{{ device.memory }}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="tabs-panel{% if tab_id == 2 %} is-active{% endif %}" id="redmine">
        {% if device.redmine_project %}
        <div class="grid-x grid-margin-x">
            <div class="cell">
                <div class="card">
                    <div class="card-section">
                        <h5>Redmine Project Wiki</h5>
                        <p>
                            <a href="{{ redmine_url }}/projects/{{ device.redmine_project }}/wiki/">{{ redmine_url }}/projects/{{ device.redmine_project }}/wiki/</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        <div class="grid-x grid-margin-x">
            <div class="cell">
                <div class="card">
                    <div class="card-section">
                        <h5>{% trans "Export to" %} Redmine</h5>
                        <form action="{% url 'redmine_device_export' %}" method="post">
                            {% csrf_token %}
                            {{ export_form.as_p }}
                            <input type="submit" value='{% trans "Export" %}' class="button small success" />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock %}
